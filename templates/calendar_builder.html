<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Builder</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body {
            margin: 0;
            display: flex;
            overflow: hidden;
        }
        .calendar-preview {
            flex: 1;
            padding: 20px;
            background: #f0f0f0;
            overflow: auto;
            position: relative;
        }
        .calendar-preview #calendar {
            border: 2px solid;
            padding: 20px;
            background: white;
        }
        .calendar-preview .date-box {
            display: inline-block;
            width: 50px;
            height: 50px;
            margin: 5px;
            border: 1px solid;
            text-align: center;
            line-height: 50px;
        }
        .quick-access-bar {
            width: 300px;
            background: white;
            padding: 20px;
            box-shadow: -4px 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        .quick-access-bar .zoom-buttons {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .quick-access-bar .parameters {
            flex: 1;
            overflow: auto;
        }
        .quick-access-bar .parameters label {
            display: block;
            margin-top: 10px;
        }
        .quick-access-bar .parameters input,
        .quick-access-bar .parameters select,
        .quick-access-bar .parameters textarea {
            width: 100%;
            margin-top: 5px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <div class="calendar-preview">
        <header id="calendar-header" style="background-color: #0078d4;">
            <h1 id="calendar-title" style="color: #ffffff;">My Calendar</h1>
        </header>
        <main>
            <section id="my-calendar">
                <h2 id="banner-title">My Calendar</h2>
                <p id="bio-text">Select a date below to support C.R.A.S.H. Robotics.</p>
                <div id="calendar">
                    <!-- Generate 31 date boxes -->
                    {% for i in range(1, 32) %}
                    <div class="date-box">{{ i }}</div>
                    {% endfor %}
                </div>
            </section>
        </main>
    </div>
    <div class="quick-access-bar">
        <div class="zoom-buttons">
            <button id="zoom-title">Title</button>
            <button id="zoom-banner">Banner</button>
            <button id="zoom-calendar">Calendar</button>
        </div>
        <div class="parameters" id="parameters">
            <!-- Parameters will be dynamically inserted here -->
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const calendarHeader = document.getElementById('calendar-header');
            const calendarTitle = document.getElementById('calendar-title');
            const bannerTitle = document.getElementById('banner-title');
            const bioText = document.getElementById('bio-text');
            const calendar = document.getElementById('calendar');
            const parameters = document.getElementById('parameters');

            function clearParameters() {
                parameters.innerHTML = '';
            }

            function addParameter(labelText, inputType, inputId, inputValue) {
                const label = document.createElement('label');
                label.textContent = labelText;
                const input = document.createElement(inputType);
                input.id = inputId;
                input.value = inputValue;
                input.addEventListener('input', updatePreview);
                parameters.appendChild(label);
                parameters.appendChild(input);
            }

            function updatePreview() {
                const titleBannerColor = document.getElementById('title_banner_color');
                const titleColor = document.getElementById('title_color');
                const separatorColor = document.getElementById('separator_color');
                const textColor = document.getElementById('text_color');
                const titleText = document.getElementById('title_text');
                const bannerTitleText = document.getElementById('banner_title_text');
                const bioTextContent = document.getElementById('bio_text');
                const calendarBorderColor = document.getElementById('calendar_border_color');
                const backgroundImage = document.getElementById('background_image');
                const backgroundSpacing = document.getElementById('background_spacing');
                const backgroundBlur = document.getElementById('background_blur');
                const backgroundSize = document.getElementById('background_size');

                if (titleBannerColor) calendarHeader.style.backgroundColor = titleBannerColor.value;
                if (titleColor) calendarTitle.style.color = titleColor.value;
                if (separatorColor) calendar.style.borderColor = separatorColor.value;
                if (textColor) {
                    calendarTitle.style.color = textColor.value;
                    bannerTitle.style.color = textColor.value;
                    bioText.style.color = textColor.value;
                }
                if (titleText) calendarTitle.textContent = titleText.value;
                if (bannerTitleText) bannerTitle.textContent = bannerTitleText.value;
                if (bioTextContent) bioText.textContent = bioTextContent.value;
                if (calendarBorderColor) calendar.style.borderColor = calendarBorderColor.value;
                if (backgroundImage) calendar.style.backgroundImage = `url(${URL.createObjectURL(backgroundImage.files[0])})`;
                if (backgroundSpacing) calendar.style.backgroundSize = `${backgroundSpacing.value}px`;
                if (backgroundBlur) calendar.style.filter = `blur(${backgroundBlur.value}px)`;
                if (backgroundSize) calendar.style.backgroundSize = `${backgroundSize.value}px`;
            }

            calendarTitle.addEventListener('click', () => {
                clearParameters();
                addParameter('Title Text', 'input', 'title_text', calendarTitle.textContent);
                addParameter('Title Color', 'input', 'title_color', calendarTitle.style.color);
            });

            calendarHeader.addEventListener('click', () => {
                clearParameters();
                addParameter('Title Banner Color', 'input', 'title_banner_color', calendarHeader.style.backgroundColor);
                addParameter('Upload Banner Image', 'file', 'banner_image', '');
            });

            bannerTitle.addEventListener('click', () => {
                clearParameters();
                addParameter('Banner Title Text', 'input', 'banner_title_text', bannerTitle.textContent);
                addParameter('Text Color', 'input', 'text_color', bannerTitle.style.color);
            });

            bioText.addEventListener('click', () => {
                clearParameters();
                addParameter('Bio Text', 'textarea', 'bio_text', bioText.textContent);
                addParameter('Text Color', 'input', 'text_color', bioText.style.color);
            });

            calendar.addEventListener('click', () => {
                clearParameters();
                addParameter('Calendar Border Color', 'input', 'calendar_border_color', calendar.style.borderColor);
                addParameter('Upload Background Image', 'file', 'background_image', '');
                addParameter('Background Image Spacing', 'input', 'background_spacing', '');
                addParameter('Background Image Blur', 'input', 'background_blur', '');
                addParameter('Background Image Size', 'input', 'background_size', '');
            });

            document.getElementById('zoom-title').addEventListener('click', () => {
                calendarTitle.scrollIntoView({ behavior: 'smooth' });
            });

            document.getElementById('zoom-banner').addEventListener('click', () => {
                bannerTitle.scrollIntoView({ behavior: 'smooth' });
            });

            document.getElementById('zoom-calendar').addEventListener('click', () => {
                calendar.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>

